<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel=manifest href=./manifest.json>
<title>Geo Test</title>

<style>
html, body {
    height: 100%;
    margin:0;
    background-color: black;
}
</style>

<script>
var ctx = null;
var w = 0;
var h = 0;
var gps = {coords: {altitude: 0,speed: 0}};

draw_text_centered = function(x, y, txt) {
    var txt_w = ctx.measureText(txt).width;
    ctx.fillText(txt, x - txt_w / 2, y);
}

draw_portrait = function() {
    var center = w / 2;
    var quarter = center / 2;
    ctx.font = quarter / 2 + 'pt Calibri';
    draw_text_centered(quarter, quarter / 2, Math.round(gps.coords.altitude)); 
    draw_text_centered(center + quarter, quarter / 2, Math.round(3.6 * gps.coords.speed)); 
}

draw_landscape = function() {
    var center = h / 2;
    var quarter = center / 2;
    ctx.font = quarter / 2 + 'pt Calibri';
    draw_text_centered(quarter, quarter / 2, Math.round(gps.coords.altitude)); 
    draw_text_centered(quarter, quarter + quarter / 2, Math.round(3.6 * gps.coords.speed)); 
}

draw = function() {
    w = cs.width;
    h = cs.height;
    ctx.fillStyle = "#00FFFFFF";
    ctx.textBaseline = 'center';
    ctx.clearRect(0, 0, w, h);
    if(w > h)
        return draw_landscape(ctx, w, h);
    draw_portrait(ctx, w, h);
}

window.onload = function() {
    ctx = cs.getContext("2d");
    window.onresize();

    if(navigator.geolocation)
        navigator.geolocation.watchPosition(function(gg) {gps = gg;draw();},function(error) {},{ enableHighAccuracy: true });
}

window.onresize = function() {
    cs.width = window.innerWidth;
    cs.height = window.innerHeight;
    draw();
}
</script>
</head>
<body>
<canvas id='cs'></canvas>
</body>
</html>

